(this["webpackJsonpsearch-github-repositories"]=this["webpackJsonpsearch-github-repositories"]||[]).push([[0],[,function(e,a,t){e.exports={"search-page":"style_search-page__3o55y","search-page__header":"style_search-page__header__zePkn","search-page__header_sub":"style_search-page__header_sub__1hlKT","search-page__results":"style_search-page__results__1jJvi","search-page__no-result":"style_search-page__no-result__2zczF","search-page__result":"style_search-page__result__KjxO-","search-page__result_header":"style_search-page__result_header__v6q1T","search-page__name":"style_search-page__name__CMoB7","search-page__stars":"style_search-page__stars__vgZhX"}},,function(e,a,t){e.exports={form:"style_form__smM92",form__input:"style_form__input__aq09a",form__buttons:"style_form__buttons__20J4k",form__btn:"style_form__btn__dHfih",form__btn_cancel:"style_form__btn_cancel__nFrse"}},,function(e,a,t){e.exports={paginator:"styles_paginator__2jQ7X",paginator__btn:"styles_paginator__btn__3UrXs",paginator__highlight:"styles_paginator__highlight__VdHdu"}},,,,,,,,,,function(e,a,t){e.exports={loader:"style_loader__16qWE"}},function(e,a,t){e.exports=t(22)},,,,,function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),s=t.n(r),n=t(14),c=t.n(n),o=(t(21),t(6)),l=t(12),i=t(7),h=t(8),_=t(10),u=t(9),p=t(2),g=t(11),m=t(4),b=t.n(m),d=t(15),f=t.n(d),y=function(){return s.a.createElement("div",{className:f.a.loader})},v=t(3),E=t.n(v),N=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(_.a)(this,Object(u.a)(a).call(this,e))).changeInputValue=t.changeInputValue.bind(Object(p.a)(t)),t.submitSearchHandler=t.submitSearchHandler.bind(Object(p.a)(t)),t}return Object(g.a)(a,e),Object(h.a)(a,[{key:"changeInputValue",value:function(e){e.preventDefault(),(0,this.props.changeSearchQuery)(e.target.value)}},{key:"submitSearchHandler",value:function(e){e.preventDefault(),(0,this.props.searchRepos)()}},{key:"render",value:function(){var e=this.props,a=e.cancelSearching,t=e.searchQuery;return s.a.createElement("form",{className:E.a.form,onSubmit:this.submitSearchHandler},s.a.createElement("input",{type:"text",name:"search",className:E.a.form__input,placeholder:"Enter a repository name",value:t,onChange:this.changeInputValue}),s.a.createElement("div",{className:E.a.form__buttons},s.a.createElement("button",{type:"submit",className:b()(E.a.form__btn,E.a.form__btn_submit)},"Search"),s.a.createElement("button",{type:"button",onClick:a,className:b()(E.a.form__btn,E.a.form__btn_cancel)},"Cancel\xa0searching")))}}]),a}(s.a.Component),S=t(5),k=t.n(S),j=function(e){var a=e.currentPage,t=e.pagesNumber,r=e.previousClickHandler,n=e.nextClickHandler;return s.a.createElement("div",{className:k.a.paginator},s.a.createElement("button",{className:k.a.paginator__btn,onClick:r,disabled:a<=1},"<< prev"),s.a.createElement("span",null,"page ",s.a.createElement("span",{className:k.a.paginator__highlight},a)," from ",s.a.createElement("span",{className:k.a.paginator__highlight},t)),s.a.createElement("button",{className:k.a.paginator__btn,onClick:n,disabled:a>=t},"next >>"))},C=t(1),P=t.n(C),R=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(_.a)(this,Object(u.a)(a).call(this,e))).state={searchQuery:"",errorMessage:"",isRequestProcessed:!1,currentPage:1,pagesNumber:1,resultsPerPage:30,cache:{},repos:[]},t.changeSearchQuery=t.changeSearchQuery.bind(Object(p.a)(t)),t.cancelSearching=t.cancelSearching.bind(Object(p.a)(t)),t.searchRepos=t.searchRepos.bind(Object(p.a)(t)),t}return Object(g.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.searchRepos()}},{key:"componentWillUnmount",value:function(){this.fetchController&&this.fetchController.abort()}},{key:"changeSearchQuery",value:function(e){var a=this.state,t=a.searchQuery,r=a.currentPage;e!==t&&(r=1),this.setState({searchQuery:e,currentPage:r})}},{key:"searchRepos",value:function(){var e=this,a=this.state,t=a.cache,r=a.currentPage,s=a.resultsPerPage,n=a.searchQuery;""!==n?t[n]&&t[n][r]&&0!==t[n][r].length?this.setState({repos:t[n][r],pagesNumber:t[n].pagesNumber,errorMessage:""}):(this.setState({isRequestProcessed:!0}),this.fetchController=new AbortController,this.fetchSignal=this.fetchController.signal,fetch("https://api.github.com/search/repositories?q=".concat(n,"}&sort=stars&order=desc&page=").concat(r,"&per_page=").concat(s),{signal:this.fetchSignal}).then((function(e){return e.ok?e.json():null})).then((function(a){if(null!==a){var c=a.total_count,i=Math.ceil(c/s);e.setState({isRequestProcessed:!1,errorMessage:"",currentPage:r,pagesNumber:i,repos:a.items,cache:Object(l.a)({},t,Object(o.a)({},n,Object(l.a)({},t[n],Object(o.a)({pagesNumber:i},r,a.items))))})}else e.setState({isRequestProcessed:!1,errorMessage:"Something went wrong. Please wait few seconds before another search."})})).catch((function(a){console.log("ERROR",a),e.setState({isRequestProcessed:!1,errorMessage:"".concat("AbortError"===a.name?"Searching was cancelled.":"Something went wrong.")})}))):this.setState({repos:[],pagesNumber:1,errorMessage:""})}},{key:"paginatorClickHandler",value:function(e){var a=this,t=this.state.currentPage,r="prev"===e?t-1:t+1;this.setState({currentPage:r},(function(){a.searchRepos()}))}},{key:"cancelSearching",value:function(){this.fetchController&&this.fetchController.abort()}},{key:"createReposList",value:function(){var e=this.state,a=e.repos,t=e.errorMessage;return t?s.a.createElement("div",{className:P.a["search-page__no-result"]},t):s.a.createElement(s.a.Fragment,null,0===a.length?s.a.createElement("div",{className:P.a["search-page__no-result"]},"There are no repositories"):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:b()(P.a["search-page__result"],P.a["search-page__result_header"])},s.a.createElement("span",{className:P.a["search-page__name"]},"Repository name"),s.a.createElement("span",{className:P.a["search-page__stars"]},"Stars")),a.map((function(e){return s.a.createElement("div",{key:e.id,className:P.a["search-page__result"]},s.a.createElement("a",{className:P.a["search-page__name"],href:e.html_url,target:"_blank",rel:"noopener noreferrer"},e.name),s.a.createElement("span",{className:P.a["search-page__stars"]},e.stargazers_count))}))))}},{key:"render",value:function(){var e=this.state,a=e.currentPage,t=e.isRequestProcessed,r=e.pagesNumber,n=e.repos,c=e.searchQuery;return s.a.createElement("main",{className:P.a["search-page"]},s.a.createElement("h1",{className:P.a["search-page__header"]},"Repositories search"),s.a.createElement(N,{searchQuery:c,searchRepos:this.searchRepos,changeSearchQuery:this.changeSearchQuery,cancelSearching:this.cancelSearching}),s.a.createElement("h2",{className:b()(P.a["search-page__header"],P.a["search-page__header_sub"])},"Results"),!!n&&!!n.length&&s.a.createElement(j,{currentPage:a,pagesNumber:r,previousClickHandler:this.paginatorClickHandler.bind(this,"prev"),nextClickHandler:this.paginatorClickHandler.bind(this,"next")}),t?s.a.createElement(y,null):s.a.createElement("div",{className:P.a["search-page__results"]},this.createReposList()))}}]),a}(s.a.Component),O=function(){return s.a.createElement("div",null,s.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.47d85a7e.chunk.js.map